from wrpsolver.bc.gym_env import GridWorldEnv
import shapely
import cv2
pointList = [[21, 1], [21, 1], [21, 50], [33, 50], [34, 50], [34, 52], [33, 52], [1, 52], [1, 54], [1, 54], [1, 83], [1, 83], [1, 109], [1, 109], [1, 125], [28, 125], [28, 126], [28, 127], [28, 127], [1, 127], [1, 198], [65, 198], [65, 197], [65, 197], [65, 127], [43, 127], [42, 127], [42, 126], [43, 125], [68, 125], [68, 126], [68, 127], [68, 127], [67, 127], [67, 198], [110, 198], [110, 127], [82, 127], [82, 127], [82, 126], [82, 125], [92, 125], [92, 114], [92, 114], [92, 102], [92, 102], [94, 102], [94, 102], [94, 125], [139, 125], [139, 126], [139, 127], [139, 127], [111, 127], [111, 128], [111, 129], [111, 198], [184, 198], [184, 127], [154, 127], [153, 127], [153, 126], [154, 126], [184, 126], [184, 27], [94, 27], [94, 27], [94, 49], [94, 49], [94, 70], [94, 70], [92, 70], [92, 70], [92, 60], [92, 60], [92, 52], [78, 52], [78, 52], [78, 50], [78, 50], [91, 50], [91, 1]]
actionList = [2, 6, 2, 2, 6, 6, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 4, 2, 2, 4, 2, 2, 4, 4, 2, 4, 2, 2, 7, 7, 7, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 4, 2, 4, 3, 3, 3, 7, 7, 7, 3, 3, 7, 3, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 0, 7, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 0, 0, 0, 0, 0, 4, 0, 0, 4, 4, 0, 4, 0, 0, 4, 0, 4, 0, 0, 4, 4, 4, 4, 4, 0, 4, 0, 0, 0, 0, 0, 0, 0, 4, 4, 2, 4]
startPoint = (37, 50)
polygon = shapely.Polygon(pointList)
gridEnv = GridWorldEnv(polygon)

image = gridEnv.reset(polygon,startPoint)
# cv2.imshow('aa',image)
# cv2.waitKey(0)
rewardSum = 0
Done = False
for action in actionList:
    _,reward,Done,_ = gridEnv.step(action)
    print(reward)
    rewardSum += reward
    # cv2.imshow('aa',gridEnv.observation)
    # cv2.waitKey(0)
    if(Done):
        break

print(rewardSum)